/* assets/css/components/_footer.css (FLEXBOX + CLIPPING ZONE VERSION) */

.site-footer {
    position: fixed;
    left: var(--frame-padding-horizontal);
    right: var(--frame-padding-horizontal);
    bottom: 0;
    z-index: 100;
    box-sizing: border-box;
    height: var(--frame-padding-vertical);
    display: flex;
    align-items: center;
    transition: opacity 0.5s ease;
    overflow: hidden; /* ДОБАВЛЕНО: Обрезаем все, что не помещается */
}

.footer-content {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    height: var(--frame-content-height); /* ДОБАВЛЕНО: Фиксированная высота для контента */
}

/* --- ЦЕНТРАЛЬНЫЙ БЛОК (ИДЕАЛЬНОЕ ЦЕНТРИРОВАНИЕ) --- */
#section-progress { 
    display: flex; 
    gap: 6px; 
    transition: opacity 0.3s ease, visibility 0s;
    
    /* Абсолютное позиционирование для идеального центра */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/* --- КОЛОНКИ СЛЕВА И СПРАВА (С ЗОНОЙ ОТСЕЧЕНИЯ) --- */
.footer-left, .footer-right {
    display: flex;
    flex-direction: column;
    gap: 6px;
    
    /* 1. Включаем обрезку контента, который не помещается */
    overflow: hidden; 

    /* 2. Анимация для плавного ПОЯВЛЕНИЯ */
    transition: opacity 0.3s ease 0.3s, visibility 0s;

    /* 
     * 3. КЛЮЧЕВОЕ ПРАВИЛО: СОЗДАНИЕ ЗОНЫ ОТСЕЧЕНИЯ
     * Мы ограничиваем максимальную ширину боковых блоков.
     * Логика: 50% ширины родителя минус половина ширины центрального блока (примем ~100px) 
     * и минус половина желаемого отступа между ними (примем 30px).
     * calc(50% - 50px - 15px) = calc(50% - 65px)
     * Это заставляет блоки сжиматься, а overflow: hidden их обрезает.
    */
    max-width: calc(50% - 65px);
}

.footer-left { 
    align-items: flex-start; 
}
.footer-right { 
    align-items: flex-end; 
}


/* ============================================================ */
/* ===            ОСТАЛЬНЫЕ СТИЛИ (БЕЗ ИЗМЕНЕНИЙ)           === */
/* ============================================================ */

.footer-socials { display: flex; align-items: center; gap: 10px; }
.footer-logos { display: flex; align-items: center; gap: 4px; opacity: 0.5; }
.email-placeholder { width: 165px; height: 14px; background-color: var(--text-color); opacity: 0.5; }
a.footer-icon-link:hover .email-placeholder { opacity: 1; }
.copyright-placeholder { width: 136px; height: 11.5px; background-color: var(--text-color); opacity: 0.5; }
.site-footer .icon-placeholder { width: 20px; height: 20px; }
.logo-placeholder-me { width: 34px; height: 20px; background-color: var(--text-color); }
.logo-placeholder-skull { width: 22px; height: 22px; background-color: var(--text-color); }
.separator-icon { width: 10px; height: 10px; background-color: var(--text-color); }

.progress-dot { width: 14px; height: 14px; border: 1px solid; }
.progress-dot:not(.active) { cursor: pointer; }
.progress-dot:not(.active):hover { border-color: var(--red-accent); }
.progress-dot.active { background-color: var(--red-accent); border-color: var(--red-accent); cursor: default; }

/* ОБЯЗАТЕЛЬНО: предотвращает "схлопывание" текста и иконок при сжатии */
.footer-socials, .footer-logos, .footer-icon-link { 
    white-space: nowrap; 
    flex-shrink: 0;
}

/* ========================================================================= */
/* === ФАЗА 2: Плавное исчезновение боковых колонок (< 525px)            === */
/* ========================================================================= */
@media (max-width: 524.98px) {
    .footer-left,
    .footer-right {
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        /* Анимация для плавного ИСЧЕЗНОВЕНИЯ */
        transition: opacity 0.3s ease, visibility 0s 0.3s;
    }
}

/* ========================================================================= */
/* === ФАЗА 3: Скрытие прогресса на очень маленьких экранах (< 200px)     === */
/* ========================================================================= */
@media (max-width: 799.98px) {
    #section-progress {
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        /* Анимация для плавного ИСЧЕЗНОВЕНИЯ */
        transition: opacity 0.3s ease, visibility 0s 0.3s;
    }
}

@media (max-height: 100.98px) {
    .site-footer {
        /* Прижимаем контент к низу, чтобы обрезка шла сверху */
        align-items: flex-end;
    }
}