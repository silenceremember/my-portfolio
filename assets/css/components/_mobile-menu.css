/* assets/css/components/_mobile-menu.css */

/* ==================================================================== */
/* ===         1. КНОПКА-БУРГЕР И ЕЕ ИКОНКА                       === */
/* ==================================================================== */

#burger-menu-button {
    position: fixed; 
    right: var(--frame-padding-horizontal);
    top: calc((var(--frame-padding-vertical) - var(--header-icon-size-normal)) / 2);
    width: var(--header-icon-size-normal);
    height: var(--header-icon-size-normal);
    
    z-index: 101; 
    
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease 0.2s, right 0s, top 0s;
}

.burger-icon {
    position: relative; 
    width: 100%; 
    height: 100%;
    overflow: hidden;
}

.burger-icon::before,
.burger-icon::after {
    content: ''; 
    position: absolute; 
    left: 0; 
    width: 100%; 
    height: 2px;
    background-color: var(--text-color); 
    opacity: 0;
    transform: translateX(-100%);
    transition: transform 0.3s ease, opacity 0.3s ease, top 0.3s ease, background-color 0.3s ease;
}
.burger-icon::before { top: 30%; transition-delay: 0.3s; }
.burger-icon::after { top: 70%; transition-delay: 0.35s; }


/* ==================================================================== */
/* ===         2. ОВЕРЛЕЙ И БОКОВАЯ ПАНЕЛЬ МЕНЮ                   === */
/* ==================================================================== */

#mobile-menu-overlay {
    position: fixed; 
    
    /* ИЗМЕНЕНО: Ограничиваем оверлей областью между хедером и футером */
    top: var(--frame-padding-vertical);
    bottom: var(--frame-padding-vertical);
    left: 0;
    right: 0;
    
    background-color: rgba(18, 18, 18, 0.7); 
    
    /* ИЗМЕНЕНО: z-index теперь НИЖЕ хедера (100) */
    z-index: 90;
    
    opacity: 0; visibility: hidden; pointer-events: none;
    transition: opacity 0.4s ease, visibility 0s 0.4s;
}

body[data-theme="light"] #mobile-menu-overlay {
    background-color: rgba(245, 245, 245, 0.7);
}

.mobile-nav { 
    position: fixed;
    top: 0;
    right: 0;
    width: 250px; /* ИЗМЕНЕНО: Ширина панели */
    max-width: 85%;
    height: 100%;
    background-color: var(--bg-color);
    z-index: 90; 
    transform: translateX(100%);
    visibility: hidden;
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), visibility 0s 0.4s;
    display: flex; 
    flex-direction: column; 
    align-items: flex-end; /* ИЗМЕНЕНО: Выравниваем блоки ссылок по правому краю */
    justify-content: flex-start;
    padding: 80px 10px 40px 30px; /* ИЗМЕНЕНО: Уменьшили боковые отступы */
    box-sizing: border-box;
    gap: 20px;
}

/* НОВЫЙ БЛОК: Создаем вертикальную линию с помощью псевдо-элемента */
.mobile-nav::before {
    content: '';
    position: absolute;
    /* Позиционируем линию точно между хедером и футером */
    top: var(--frame-padding-vertical);
    bottom: var(--frame-padding-vertical);
    left: 0;
    /* Задаем ширину и цвет линии */
    width: 1px;
    background-color: var(--border-color);
}


.mobile-nav .nav-link {
    font-size: 16px;
    text-align: right; /* ДОБАВЛЕНО: Выравниваем текст внутри ссылки по правому краю */
}


/* ==================================================================== */
/* ===         3. СОСТОЯНИЕ ОТКРЫТОГО МЕНЮ (класс .menu-open)       === */
/* ==================================================================== */

body.menu-open #mobile-menu-overlay { 
    opacity: 1; 
    visibility: visible; 
    pointer-events: auto;
    transition: opacity 0.4s ease;
}

body.menu-open .mobile-nav {
    transform: translateX(0);
    visibility: visible;
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

body.menu-open .burger-icon::before { 
    top: 50%; transform: rotate(45deg); opacity: 1; transition-delay: 0s;
    background-color: var(--red-accent);
}
body.menu-open .burger-icon::after { 
    top: 50%; transform: rotate(-45deg); opacity: 1; transition-delay: 0s;
    background-color: var(--red-accent);
}

/* ==================================================================== */
/* ===         4. МЕДИА-ЗАПРОС ДЛЯ ПОКАЗА БУРГЕРА                 === */
/* ==================================================================== */
@media (max-width: 799.98px) {
    #burger-menu-button { opacity: 1; pointer-events: auto; }
    .burger-icon::before,
    .burger-icon::after { opacity: 1; transform: translateX(0); }
}